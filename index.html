<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Server - Dashboard AvanÃ§ado</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-content">
            <div class="header-title">
                <div>
                    <h1>ğŸš€ MCP Server Dashboard</h1>
                    <p class="subtitle">Gerenciamento AvanÃ§ado de Tarefas, CalendÃ¡rio e Logs</p>
                </div>
            </div>
            <div class="header-actions">
                <div id="serverStatus" class="server-status">
                    <div class="status-dot status-offline"></div>
                    <span>Verificando...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- MAIN CONTAINER -->
    <div class="container">
        <!-- STATS GRID -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">ğŸ“‹</div>
                    <div class="stat-label">Tarefas Ativas</div>
                </div>
                <div class="stat-value" id="taskCount">0</div>
                <div class="stat-change" id="taskChange">Carregando...</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">âœ…</div>
                    <div class="stat-label">ConcluÃ­das</div>
                </div>
                <div class="stat-value" id="completedCount">0</div>
                <div class="stat-change" id="completedChange">Carregando...</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">ğŸ“…</div>
                    <div class="stat-label">Eventos</div>
                </div>
                <div class="stat-value" id="eventCount">0</div>
                <div class="stat-change">PrÃ³ximos 7 dias</div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon">ğŸ“</div>
                    <div class="stat-label">Notas</div>
                </div>
                <div class="stat-value" id="noteCount">0</div>
                <div class="stat-change">Total armazenadas</div>
            </div>
        </div>

        <!-- TABS -->
        <div class="tabs-container">
            <button class="tab active" data-tab="dashboard">ğŸ“Š Dashboard</button>
            <button class="tab" data-tab="tasks">ğŸ“‹ Tarefas</button>
            <button class="tab" data-tab="calendar">ğŸ“… CalendÃ¡rio</button>
            <button class="tab" data-tab="notes">ğŸ“ Notas</button>
            <button class="tab" data-tab="connections">ğŸ“¡ ConexÃµes MCP</button>
            <button class="tab" data-tab="logs">ğŸ“Š Logs</button>
        </div>

        <!-- DASHBOARD PANEL -->
        <div id="dashboard" class="content-panel active">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“Š Dashboard Overview</h2>
            </div>
            <div style="display: grid; gap: 24px;">
                <div>
                    <h3 style="margin-bottom: 16px; color: var(--text-secondary);">Tarefas Recentes</h3>
                    <div id="dashboardTasks"></div>
                </div>
                <div>
                    <h3 style="margin-bottom: 16px; color: var(--text-secondary);">PrÃ³ximos Eventos</h3>
                    <div id="dashboardEvents"></div>
                </div>
            </div>
        </div>

        <!-- TASKS PANEL -->
        <div id="tasks" class="content-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“‹ Gerenciar Tarefas</h2>
                <div class="panel-actions">
                    <button class="btn btn-secondary btn-sm" onclick="loadTasks()">ğŸ”„ Atualizar</button>
                    <button class="btn btn-primary btn-sm" onclick="showCreateTaskModal()">â• Nova Tarefa</button>
                </div>
            </div>

            <div class="filter-bar">
                <button class="filter-btn active" data-filter="all">Todas</button>
                <button class="filter-btn" data-filter="pending">Pendentes</button>
                <button class="filter-btn" data-filter="completed">ConcluÃ­das</button>
                <button class="filter-btn" data-filter="high">Alta Prioridade</button>
                <div class="search-box">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" class="search-input" id="taskSearch" placeholder="Buscar tarefas...">
                </div>
            </div>

            <div id="taskList" class="task-grid"></div>
        </div>

        <!-- CALENDAR PANEL -->
        <div id="calendar" class="content-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“… CalendÃ¡rio</h2>
                <div class="panel-actions">
                    <button class="btn btn-secondary btn-sm" onclick="loadEvents()">ğŸ”„ Atualizar</button>
                    <button class="btn btn-primary btn-sm" onclick="showCreateEventModal()">â• Novo Evento</button>
                </div>
            </div>
            <div id="eventList"></div>
        </div>

        <!-- NOTES PANEL -->
        <div id="notes" class="content-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“ Notas</h2>
                <div class="panel-actions">
                    <button class="btn btn-secondary btn-sm" onclick="loadNotes()">ğŸ”„ Atualizar</button>
                    <button class="btn btn-primary btn-sm" onclick="showCreateNoteModal()">â• Nova Nota</button>
                </div>
            </div>
            <div id="noteList"></div>
        </div>

        <!-- CONNECTIONS PANEL -->
        <div id="connections" class="content-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“¡ Clientes MCP Conectados</h2>
                <div class="panel-actions">
                    <button class="btn btn-secondary btn-sm" onclick="loadConnections()">ğŸ”„ Atualizar</button>
                </div>
            </div>
            
            <div class="stats-grid" style="margin-bottom: 24px;">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-label">Clientes Ativos</div>
                    </div>
                    <div class="stat-value" id="activeClientsCount">0</div>
                    <div class="stat-change">Online agora</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-label">Total de RequisiÃ§Ãµes</div>
                    </div>
                    <div class="stat-value" id="totalRequestsCount">0</div>
                    <div class="stat-change">Todas as conexÃµes</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-icon">ğŸ”§</div>
                        <div class="stat-label">Ferramentas Usadas</div>
                    </div>
                    <div class="stat-value" id="toolsUsedCount">0</div>
                    <div class="stat-change">Ãšnicas</div>
                </div>
            </div>
            
            <div id="connectionsList" class="connection-grid"></div>
        </div>

        <!-- LOGS PANEL -->
        <div id="logs" class="content-panel">
            <div class="panel-header">
                <h2 class="panel-title">ğŸ“Š Logs do Sistema</h2>
                <div class="panel-actions">
                    <button class="btn btn-secondary btn-sm" onclick="loadLogs()">ğŸ”„ Atualizar</button>
                    <button class="btn btn-secondary btn-sm" onclick="clearLogFilters()">ğŸ”„ Limpar Filtros</button>
                </div>
            </div>

            <div class="log-controls">
                <button class="filter-btn active" data-log-filter="all">Todos</button>
                <button class="filter-btn" data-log-filter="info">Info</button>
                <button class="filter-btn" data-log-filter="success">Success</button>
                <button class="filter-btn" data-log-filter="warning">Warning</button>
                <button class="filter-btn" data-log-filter="error">Error</button>
                <div class="search-box">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" class="search-input" id="logSearch" placeholder="Buscar nos logs...">
                </div>
            </div>

            <div id="logContainer" class="log-container"></div>
        </div>
    </div>

    <!-- TOAST CONTAINER -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- MODALS -->
    <div id="modalOverlay" class="modal-overlay" onclick="closeModals()"></div>
    
    <div id="taskModal" class="modal">
        <div class="modal-header">
            <h3 class="modal-title">â• Nova Tarefa</h3>
            <button class="modal-close" onclick="closeModals()">âœ•</button>
        </div>
        <form id="createTaskForm" class="modal-body">
            <div class="form-group">
                <label class="form-label required">TÃ­tulo</label>
                <input type="text" class="form-input" id="taskTitle" required placeholder="Ex: Estudar Python">
            </div>
            <div class="form-group">
                <label class="form-label">DescriÃ§Ã£o</label>
                <textarea class="form-textarea" id="taskDescription" placeholder="Detalhes da tarefa..."></textarea>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Prioridade</label>
                    <select class="form-select" id="taskPriority">
                        <option value="low">ğŸŸ¢ Baixa</option>
                        <option value="medium" selected>ğŸŸ¡ MÃ©dia</option>
                        <option value="high">ğŸ”´ Alta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Data Limite</label>
                    <input type="date" class="form-input" id="taskDueDate">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModals()">Cancelar</button>
                <button type="submit" class="btn btn-primary">Criar Tarefa</button>
            </div>
        </form>
    </div>

    <div id="eventModal" class="modal">
        <div class="modal-header">
            <h3 class="modal-title">ğŸ“… Novo Evento</h3>
            <button class="modal-close" onclick="closeModals()">âœ•</button>
        </div>
        <form id="createEventForm" class="modal-body">
            <div class="form-group">
                <label class="form-label required">TÃ­tulo</label>
                <input type="text" class="form-input" id="eventTitle" required placeholder="Ex: ReuniÃ£o de equipe">
            </div>
            <div class="form-group">
                <label class="form-label">DescriÃ§Ã£o</label>
                <textarea class="form-textarea" id="eventDescription" placeholder="Detalhes do evento..."></textarea>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label required">Data/Hora InÃ­cio</label>
                    <input type="datetime-local" class="form-input" id="eventStartTime" required>
                </div>
                <div class="form-group">
                    <label class="form-label required">Data/Hora Fim</label>
                    <input type="datetime-local" class="form-input" id="eventEndTime" required>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Local</label>
                <input type="text" class="form-input" id="eventLocation" placeholder="Ex: Sala de reuniÃµes">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModals()">Cancelar</button>
                <button type="submit" class="btn btn-primary">Criar Evento</button>
            </div>
        </form>
    </div>

    <div id="noteModal" class="modal">
        <div class="modal-header">
            <h3 class="modal-title">ğŸ“ Nova Nota</h3>
            <button class="modal-close" onclick="closeModals()">âœ•</button>
        </div>
        <form id="createNoteForm" class="modal-body">
            <div class="form-group">
                <label class="form-label required">TÃ­tulo</label>
                <input type="text" class="form-input" id="noteTitle" required placeholder="Ex: Ideias para o projeto">
            </div>
            <div class="form-group">
                <label class="form-label required">ConteÃºdo</label>
                <textarea class="form-textarea" id="noteContent" required placeholder="Escreva sua nota aqui..." style="min-height: 200px;"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Tags (separadas por vÃ­rgula)</label>
                <input type="text" class="form-input" id="noteTags" placeholder="Ex: trabalho, importante, ideias">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModals()">Cancelar</button>
                <button type="submit" class="btn btn-primary">Criar Nota</button>
            </div>
        </form>
    </div>

    <link rel="stylesheet" href="styles.css">
    <script src="app.js"></script>
</body>
</html>
